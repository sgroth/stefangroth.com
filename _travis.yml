language: ruby
rvm:
  - 2.4.2

install:
  - bundle install
  - gem install jekyll
  - gem install jekyll-scholar
  - gem install jekyll-pandoc
  - gem install jekyll-paginate-v2
  - gem install jekyll-feed

branches:
  only:
    - master

cache: bundler

env:
  global:
    #- JEKYLL_ENV=production
    - NOKOGIRI_USE_SYSTEM_LIBRARIES=true

notifications:
  email:
    recipients:
      - stefangroth@me.com
    on_success: always
    on_failure: always

script:
  - chmod +x _scripts/build.sh
  - _scripts/build.sh

after_success:
  - chmod +x _scripts/deploy.sh
  - _scripts/deploy.sh

sudo: false
addons:
  apt:
    packages:
      - ncftp
